<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
  <DataTemplate x:Key="CardTemplate">
    <Border x:Name="CardFrame"
        Background="#1A2432"
        BorderBrush="#2D3B50"
        BorderThickness="1"
        CornerRadius="8"
        Padding="8"
        Margin="0,2,0,2">
      <TextBlock x:Name="CardLabel"
          Text="{Binding}"
          FontFamily="Consolas"
          FontSize="13"
          Foreground="{StaticResource TextPrimary}"/>
    </Border>
    <DataTemplate.Triggers>
      <DataTrigger Binding="{Binding}"
          Value="Hidden">
        <Setter TargetName="CardFrame"
            Property="Background">
          <Setter.Value>
            <DrawingBrush TileMode="Tile"
                Viewport="0,0,12,12"
                ViewportUnits="Absolute"
                Viewbox="0,0,12,12"
                ViewboxUnits="Absolute">
              <DrawingBrush.Drawing>
                <DrawingGroup>
                  <GeometryDrawing Brush="#1B1F2A"
                      Geometry="M0,0 L12,0 12,12 0,12 Z"/>
                  <GeometryDrawing Brush="#233044"
                      Geometry="M-6,12 L12,-6 18,0 0,18 Z"/>
                </DrawingGroup>
              </DrawingBrush.Drawing>
            </DrawingBrush>
          </Setter.Value>
        </Setter>
        <Setter TargetName="CardFrame"
            Property="BorderBrush"
            Value="#3B4A66"/>
        <Setter TargetName="CardLabel"
            Property="Text"
            Value="Card back"/>
        <Setter TargetName="CardLabel"
            Property="Foreground"
            Value="{StaticResource TextMuted}"/>
      </DataTrigger>
    </DataTemplate.Triggers>
  </DataTemplate>

  <DataTemplate x:Key="HandTemplate">
    <Border x:Name="HandFrame"
        Background="#1A2533"
        BorderBrush="#2D3B50"
        BorderThickness="1"
        CornerRadius="12"
        Padding="12"
        Margin="0,0,12,12"
        RenderTransformOrigin="0.5,0.5">
      <Border.RenderTransform>
        <ScaleTransform ScaleX="1"
            ScaleY="1"/>
      </Border.RenderTransform>
      <StackPanel>
        <TextBlock Text="{Binding Title}"
            FontWeight="SemiBold"
            Foreground="{StaticResource TextMuted}"/>
        <TextBlock Text="{Binding ValueText}"
            Margin="0,6,0,0"
            FontSize="14"/>
        <TextBlock x:Name="HandOutcome"
          Text="{Binding OutcomeText}"
          Margin="0,4,0,0"
          Foreground="{StaticResource Accent}"
          FontSize="12"/>
        <ItemsControl ItemsSource="{Binding Cards}"
            Margin="0,8,0,0">
          <ItemsControl.ItemTemplate>
            <StaticResource ResourceKey="CardTemplate"/>
          </ItemsControl.ItemTemplate>
        </ItemsControl>
      </StackPanel>
    </Border>
    <DataTemplate.Triggers>
      <DataTrigger Binding="{Binding OutcomeText}"
          Value="">
        <Setter TargetName="HandOutcome"
            Property="Visibility"
            Value="Collapsed"/>
      </DataTrigger>
      <DataTrigger Binding="{Binding IsActive}"
          Value="True">
        <Setter TargetName="HandFrame"
            Property="BorderBrush"
            Value="{StaticResource Accent}"/>
        <Setter TargetName="HandFrame"
            Property="Background"
            Value="#1B2B3B"/>
        <DataTrigger.EnterActions>
          <BeginStoryboard>
            <Storyboard>
              <DoubleAnimation Storyboard.TargetName="HandFrame"
                               Storyboard.TargetProperty="Opacity"
                               To="1"
                               Duration="0:0:0.12"/>
              <DoubleAnimation Storyboard.TargetName="HandFrame"
                               Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                               To="1.03"
                               Duration="0:0:0.12"/>
              <DoubleAnimation Storyboard.TargetName="HandFrame"
                               Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                               To="1.03"
                               Duration="0:0:0.12"/>
            </Storyboard>
          </BeginStoryboard>
        </DataTrigger.EnterActions>
        <DataTrigger.ExitActions>
          <BeginStoryboard>
            <Storyboard>
              <DoubleAnimation Storyboard.TargetName="HandFrame"
                               Storyboard.TargetProperty="Opacity"
                               To="0.9"
                               Duration="0:0:0.12"/>
              <DoubleAnimation Storyboard.TargetName="HandFrame"
                               Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleX)"
                               To="1"
                               Duration="0:0:0.12"/>
              <DoubleAnimation Storyboard.TargetName="HandFrame"
                               Storyboard.TargetProperty="RenderTransform.(ScaleTransform.ScaleY)"
                               To="1"
                               Duration="0:0:0.12"/>
            </Storyboard>
          </BeginStoryboard>
        </DataTrigger.ExitActions>
      </DataTrigger>
    </DataTemplate.Triggers>
  </DataTemplate>
</ResourceDictionary>
